<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minesweeper</title>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        min-height: 100vh;
        max-width: 100vw;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>

  <body>
    <p>
      Just play
      <a
        href="https://www.instructables.com/id/How-to-beat-Minesweeper/"
        target="_blank"
        title="Explanation"
        >minesweeper</a
      >. To place a flag press alt while clicking on a field.
    </p>
    <select name="select-game-mode" id="select-game-mode">
      <option value="easy" selected>Easy - 9x9 / 10 Mines</option>
      <option value="normal">Normal - 16x16 / 40 Mines</option>
      <option value="hard">Hard - 16x30 / 99 Mines</option>
    </select>
    <p><span id="bomb-counter"></span> Mines</p>
    <minesweeper-game
      id="minesweeper"
      restart-selector="#restart-game-button"
      bomb-counter-selector="#bomb-counter"
    ></minesweeper-game>
    <p>
      <button id="restart-game-button">Restart!</button>
      <button id="restart-game-button-confirm">Restart with Confirm!</button>
    </p>
    <minesweeper-game rows="5" columns="5" bombs="5"></minesweeper-game>

    <script type="module">
      import './dist/minesweeper.js';

      window.addEventListener('DOMContentLoaded', () => {
        function getGameModeConfiguration(currentGameMode) {
          switch (currentGameMode) {
            case 'hard':
              return {
                columns: 30,
                rows: 16,
                bombs: 99,
              };
            case 'normal':
              return {
                columns: 16,
                rows: 16,
                bombs: 40,
              };
            case 'easy':
            default:
              return {
                columns: 9,
                rows: 9,
                bombs: 10,
              };
          }
        }

        const minesweeper = document.getElementById('minesweeper');

        minesweeper.addEventListener('game-won', () => {
          // eslint-disable-next-line no-alert
          window.alert('win');
        });

        minesweeper.addEventListener('game-lost', () => {
          // eslint-disable-next-line no-alert
          window.alert('lose');
        });

        document
          .getElementById('restart-game-button-confirm')
          .addEventListener('click', e => {
            e.preventDefault();
            if (
              // eslint-disable-next-line no-alert
              window.confirm('Are you sure, that you want to restart the game?')
            ) {
              minesweeper.restartGame();
            }
          });

        document
          .getElementById('select-game-mode')
          .addEventListener('change', e => {
            e.preventDefault();

            const gameModeConfiguration = getGameModeConfiguration(
              e.target.value
            );
            minesweeper.setGameModeConfiguration(gameModeConfiguration);
          });
      });
    </script>
  </body>
</html>
